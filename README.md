–ü–∞–∫–µ—Ç `clover_payload` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å–±—Ä–æ—Å–∞ –≥—Ä—É–∑–æ–≤ —Å –ø–æ–º–æ—â—å—é –¥—Ä–æ–Ω–∞ **Clover** –≤ —Å—Ä–µ–¥–µ —Å–∏–º—É–ª—è—Ü–∏–∏ **Gazebo**. –û–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–µ–π `clover_simulation` –∏ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ URDF-–º–æ–¥–µ–ª–∏ –¥—Ä–æ–Ω–∞**.

## üîß –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞–≤–Ω –≥—Ä—É–∑–∞** —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –¥—Ä–æ–Ω—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏–º—É–ª—è—Ü–∏–∏.  
- **–§–∏–∑–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –≥—Ä—É–∑–∞** –∫ –¥—Ä–æ–Ω—É —Å –ø–æ–º–æ—â—å—é –ø–ª–∞–≥–∏–Ω–∞ [`gazebo_ros_link_attacher`](https://github.com/pal-robotics/gazebo_ros_link_attacher).  
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ROS-—Å–µ—Ä–≤–∏—Å—ã**:
  - `/release_load` ‚Äî –æ—Ç—Å–æ–µ–¥–∏–Ω—è–µ—Ç –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≥—Ä—É–∑.  
  - `/reset_delivery` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥—Ä—É–∑ –ø–æ–¥ –¥—Ä–æ–Ω –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –µ–≥–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è –ø–æ–ª—ë—Ç–∞).  
- **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TF** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏–∑ Gazebo, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.  
- **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å –ø–∞–∫–µ—Ç–æ–º `clover_simulation`.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω `gazebo_ros_link_attacher`:

```bash
cd ~/catkin_ws/src
git clone https://github.com/pal-robotics/gazebo_ros_link_attacher.git
cd ..
catkin_make --only-pkg-with-deps gazebo_ros_link_attacher
```

–î–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å –∫ Gazebo-–ø–ª–∞–≥–∏–Ω–∞–º –≤ –≤–∞—à—É —Å—Ä–µ–¥—É:

```bash
echo 'export GAZEBO_PLUGIN_PATH=$GAZEBO_PLUGIN_PATH:~/catkin_ws/devel/lib' >> ~/.bashrc
source ~/.bashrc
```

> üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `~/.bashrc` —É–∂–µ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã `source /opt/ros/noetic/setup.bash` –∏ `source ~/catkin_ws/devel/setup.bash`.

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ `clover_payload`

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `clover_payload` –∏ —Å–æ–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:

```bash
cd ~/catkin_ws/src
git clone https://github.com/petayyyy/clover_payload.git
cd ..
catkin_make
source devel/setup.bash
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ —Å –≥—Ä—É–∑–æ–º

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π launch-—Ñ–∞–π–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≥—Ä—É–∑–∞:

- **–¢–µ–ª–µ—Ñ–æ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞–º–µ—Ä—ã**:
  ```bash
  roslaunch clover_payload payload_phone.launch
  ```

- **–¢–µ–ª–µ—Ñ–æ–Ω –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞–º–µ—Ä—ã**:
  ```bash
  roslaunch clover_payload payload_phone_no_cam.launch
  ```

- **–ö–æ—Ä–æ–±–∫–∞**:
  ```bash
  roslaunch clover_payload payload_box.launch
  ```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- **–°–±—Ä–æ—Å–∏—Ç—å –≥—Ä—É–∑**:
  ```bash
  rosservice call /release_load
  ```

- **–í–µ—Ä–Ω—É—Ç—å –≥—Ä—É–∑ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ**:
  ```bash
  rosservice call /reset_delivery
  ```

–û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`success: true/false`) –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º Clover

### 1. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è launch-—Ñ–∞–π–ª–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `simulator.launch` –∏–∑ –ø–∞–∫–µ—Ç–∞ `clover_simulation` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü —Ç–µ–≥–∞ `<launch>`:

```xml
<include file="$(find clover_payload)/launch/payload_phone.launch"/>
```

> üí° –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π launch-—Ñ–∞–π–ª (–∑–∞ –æ—Å–Ω–æ–≤—É –º–æ–∂–Ω–æ –≤–∑—è—Ç—å `payload_box.launch`), –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –≥—Ä—É–∑–æ–≤.

### 2. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∏—Ä–∞ Gazebo

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à `.world`-—Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `clover_aruco.world`) –∏ **–≤–Ω—É—Ç—Ä–∏ —Ç–µ–≥–∞ `<world>`**, **–ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º `</world>`**, –¥–æ–±–∞–≤—å—Ç–µ:

```xml
<plugin name="link_attacher" filename="libgazebo_ros_link_attacher.so"/>
```

–ü—Ä–∏–º–µ—Ä:
```xml
<world name="default">
  <!-- ... –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ... -->
  <plugin name="link_attacher" filename="libgazebo_ros_link_attacher.so"/>
</world>
```

## üí° –°–æ–≤–µ—Ç—ã

- –ú–∞—Å—Å–∞ –≥—Ä—É–∑–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **1 –≥—Ä–∞–º–º**, —á—Ç–æ–±—ã –Ω–µ –≤–ª–∏—è—Ç—å –Ω–∞ –¥–∏–Ω–∞–º–∏–∫—É –ø–æ–ª—ë—Ç–∞ –¥—Ä–æ–Ω–∞.  
- –°–º–µ—â–µ–Ω–∏–µ –≥—Ä—É–∑–∞ –∑–∞–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `offset` –≤ launch-—Ñ–∞–π–ª–µ: `[x, y, z]` –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥—Ä–æ–Ω–∞ (`base_link`).  
- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –≥—Ä—É–∑–∞ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –º–æ–¥–µ–ª—å –≤ –ø–∞–ø–∫—É `models` –∏ —É–∫–∞–∂–∏—Ç–µ –∏–º—è –º–æ–¥–µ–ª–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º launch-—Ñ–∞–π–ª–µ.